# 운영체제 (Operating System)

###### 컴퓨터 시스템 자원들을 효율적으로 관리하며, 사용자가 컴퓨터를 편리하고 효과적으로 사용할 수 있도록 환경을 제공하는 여러 프로그램의 모임.
###### 컴퓨터 사용자와 컴퓨터 하드웨어 간의 인터페이스로서 동작하는 시스템 소프트웨어의 일종으로, 다른 응용프로그램이 유용한 작업을 할 수 있도록 환경을 제공해 준다.

## 시스템 자원 (System Resource)

###### 컴퓨터 시스템 내에 제한된 물리적 부품과 가상 구성 요소를 아울러 이르는 용어

> **물리적 부품**
> * **CPU** : 중앙처리 장치
> * **I/O Devices** : 입출력 장치  
>    * 모니터, 마우스, 키보드, 네트워크
> * **저장매체**
>    * SSD
>    * HDD
> 
> ---
> **가상 시스템 자원**
> * 파일 (핸들)
> * 네트워크 (소켓)
> * **Memory** (DRAM, RAM)

## 대표적인 운영체제

* Window OS, Mac OS
* UNIX OS
    * UNIX 계열 OS
        * UNIX 와 사용법이나 OS 구조가 유사한 것들
        * 대표적으로 **LINUX**

## 운영체제의 역할

### 1. 시스템 자원 관리자

컴퓨터 하드웨어는 스스로 할 수 있는 것이 없다.

> *e.g.*
> - CPU : 각 프로그램이 얼마나 CPU 를 얼마나 사용할지 CPU 자체가 결정할 수 없음
> - Memory : 각 프로그램이 어느 주소에 저장되어야 하는지, 어느 정도의 메모리 공간을 확보해 줘야 하는지 메모리 자체가 결정할 순 없다.
> - 저장매체 : 어디에, 어떻게 저장할지는 저장매체 자체가 결정할 수 없다.


이런 것들을 할 수 있도록 해주는게 운영체제 이다.

### 2. 사용자와 컴퓨터 간의 커뮤니케이션 지원
### 3. 컴퓨터 하드웨어와 (응용) 프로그램을 제어

## 응용 프로그램 (Application) 이란 ?

* 프로그램 = 소프트웨어
* 소프트웨어
  * 운영체제
  * 응용 프로그램 (엑셀, 파워포인트, 만든 프로그램 등등)


### 운영체제와 응용프로그램간의 관계

* 운영체제는 응용프로그램을 관리한다.
   * 응용 프로그램을 실행시킨다.
   * 응용 프로그램간의 권한을 관리해준다.
   * 응용 프로그램을 사용하는 **사용자**도 관리
  
> 운영체제의 목표 : 사용자가 사용하는 응용 프로그램이 적절하고, 효율적으로 동작하도록 지원

> 운영체제는 응용 프로그램이 요청하는 시스템 리소스를 효율적으로 분배하고, 지원하는 소프트웨어


=> 운영체제는 응용 프로그램이 요청하는 메모리를 허가하고 분배한다.  
=> 운영체제는 응용 프로그램이 요청하는 CPU 시간을 제공한다.
=> 운영체제는 응용 프로그램이 요청하는 IO Devices 사용을 허가/제어한다.

###### 컴퓨터를 키게 되면, 운영체제는 memory 에 올라가게 된다.
###### 참고) [폰 노이만 구조](../src/VonNeumannArchitecture.md)

### 비유

#### 운영체제를 도서관으로 비유
```markdown
운영체제는 도서관
프로그램을 시민
컴퓨터 하드웨어는 책
운영체제의 역할
    * 시민은 도서관에 원하는 책 (자원) 을 요청함
    * 도서관은 적절한 책 (자원) 을 찾아서, 시민에게 빌려준다.
    * 시민은 대여기한이 다 되면, 도서관이 해당 책 (자원) 을 회수함
    * 도서관 없이 책을 찾을 방법이 없음
```

**운영체제는 사용자 인터페이스 제공**
- 쉘 (Shell) 
  - 사용자가 운영체제 기능과 서비스를 조작할 수 있도록 인터페이스를 제공하는 프로그램
  - 쉘은 터미널 환경(CLI)과 GUI 환경 두 종류로 분류

### 운영체제는 응용 프로그램을 위해서도 인터페이스를 제공

#### How ?
프로그래밍 언어로...!
- API (Application Programming Interface)
  - 함수로 제공
  - e.g. File Open 시, C 언어의 경우 `open` 등과 같은 곳이 이런 일종으로 볼 수 있다.
- 보통은 Library 형태로 제공
  - e.g. https://www.gnu.org/software/libc/

### 시스템 콜

- 시스템 콜 또는 시스템 호출 인터페이스. 운영체제가 운영체제 각 기능을 사용할 수 있도록 시스템 콜이라는 명령 또는 함수를 제고
- API 내부에는 시스템콜을 호출하는 형태로 만들어지는 경우가 대부분

![](../src/os_frame.jpg)

### 운영체제를 만든다면 ?
1. 운영체제를 개발한다 (Kernel)
2. System Call 개발
3. 프로그래밍 언어별 API (Library)
4. Shell 프로그램
5. 응용 프로그램 개발

**API와 시스템콜 간단정리**
> API : 각 언어별 운영체제 기능 호출 인터페이스 함수  
> 시스템콜 : 운영체제 기능을 호출하는 함수

## 운영체제 구조

## CPU Protection Rings
* CPU도 권한 모드라는 것을 가지고 있음
  * 사용자 모드 (User mode)
    * 일반적인 명령을 실행 가능 => 응용프로그램이 사용
  * 커널 모드 (Kernel mode)
    * 특권 명령어 실행 가능 => OS가 사용
    * 원하는 작업 수행을 위한 자원 접근을 가능케 하는 모드
  * 모드는 4가지가 있으나, 대부분 **Ring 3** (User Mode) 과 **Ring 0** (Kernel mode) 만이 주로 존재    
![](../src/protection_rings.png)

> Kernel ?  
> 사전적 의미로 (견과류,씨앗의) 알맹이 혹은 (사상,주체의) 핵심
> 
> Shell ?  
> 사전적 의미로 껍데기

### 시스템 콜은 Kernel 모드로 실행
* 커널 모드에서만 실행 가능한 기능들이 있음
* 커널 모드로 실행하려면, 반드시 시스템 콜을 사용해야 함 (거쳐야 함)
* 시스템 콜은 운영체제가 제공

